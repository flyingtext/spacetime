{% extends "base.html" %}
{% block title %}{{ _('Citation Statistics') }}{% endblock %}
{% block content %}
<h1>{{ _('Citation Statistics') }}</h1>
  <table class="table citation-table">
  <tr>
    <th>{{ _('DOI / Citation') }}</th>
    <th>{{ _('Usage Count') }}</th>
    <th>{{ _('Posts') }}</th>
  </tr>
  {% for item in stats %}
  <tr>
    <td>{% if item.doi %}<a href="https://doi.org/{{ item.doi }}">{{ item.doi }}</a>{% else %}{{ item.citation_text }}{% endif %}</td>
    <td>{{ item.count }}</td>
    <td>
      {% for post in item.posts %}
        <a href="{{ url_for('document', language=post.language, doc_path=post.path) }}">{{ post.display_title }}</a>{% if not loop.last %}, {% endif %}
      {% endfor %}
    </td>
  </tr>
  {% endfor %}
</table>
<nav>
  <ul class="pagination">
    <li class="page-item{% if not pagination.has_prev %} disabled{% endif %}">
      <a class="page-link" href="{{ url_for('citation_stats', page=pagination.prev_num) }}">&laquo;</a>
    </li>
    {% for p in range(1, pagination.pages + 1) %}
    <li class="page-item{% if p == pagination.page %} active{% endif %}">
      <a class="page-link" href="{{ url_for('citation_stats', page=p) }}">{{ p }}</a>
    </li>
    {% endfor %}
    <li class="page-item{% if not pagination.has_next %} disabled{% endif %}">
      <a class="page-link" href="{{ url_for('citation_stats', page=pagination.next_num) }}">&raquo;</a>
    </li>
  </ul>
</nav>
{% endblock %}
