{% extends "base.html" %}
{% block title %}{{ user.username }}{% endblock %}
{% block content %}
<h1>{{ user.username }}</h1>
{% if user.avatar_url %}
  <img src="{{ user.avatar_url }}" alt="{{ user.username }} avatar" style="max-width:150px;">
{% endif %}
<p>{{ user.bio }}</p>
<section>
  <h2>{{ _('Contribution Metrics') }}</h2>
  <ul>
    <li>{{ _('Posts') }}: {{ post_count }}</li>
    <li>{{ _('Citations') }}: {{ citation_count }}</li>
  </ul>
</section>
<section>
  <h2>{{ _('Recent Posts') }}</h2>
  <ul>
  {% for p in posts %}
    <li><a href="{{ url_for('document', language=p.language, doc_path=p.path) }}">{{ p.title }}</a></li>
  {% else %}
    <li>{{ _('No posts yet.') }}</li>
  {% endfor %}
  </ul>
</section>
{% if current_user.is_authenticated and current_user.id == user.id %}
<section>
  <h2>{{ _('Edit Profile') }}</h2>
  <form method="post">
    <p><input type="text" name="avatar_url" placeholder="{{ _('Avatar URL') }}" value="{{ user.avatar_url or '' }}"></p>
    <p><textarea name="bio" placeholder="{{ _('Bio') }}" rows="4" cols="50">{{ user.bio or '' }}</textarea></p>
    <p><button type="submit">{{ _('Update') }}</button></p>
  </form>
</section>
{% endif %}
{% endblock %}
