{% extends "base.html" %}
{% block title %}{{ _('Manage Posts') }}{% endblock %}
{% block content %}
<h1>{{ _('Manage Posts') }}</h1>
<form method="get" class="mb-3 d-flex gap-2">
  <input type="text" name="q" value="{{ q }}" placeholder="{{ _('Search') }}" class="form-control w-auto">
  <button type="submit" class="btn btn-primary btn-sm">{{ _('Search') }}</button>
</form>
<table class="table table-striped">
  <thead>
    <tr>
      <th>{{ _('ID') }}</th>
      <th>{{ _('Title') }}</th>
      <th>{{ _('Path') }}</th>
      <th>{{ _('Language') }}</th>
      <th>{{ _('Actions') }}</th>
    </tr>
  </thead>
  <tbody>
    {% for post in pagination.items %}
    <tr>
      <td>{{ post.id }}</td>
      <td><a href="{{ url_for('document', language=post.language, doc_path=post.path) }}">{{ post.display_title }}</a></td>
      <td>{{ post.path }}</td>
      <td>{{ post.language }}</td>
      <td>
        <a href="{{ url_for('edit_post', post_id=post.id) }}" class="btn btn-sm btn-secondary">{{ _('Edit') }}</a>
        <form action="{{ url_for('delete_post', post_id=post.id) }}" method="post" style="display:inline" onsubmit="return confirm('{{ _('Are you sure?') }}');">
          <button type="submit" class="btn btn-sm btn-danger">{{ _('Delete') }}</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<nav>
  <ul class="pagination">
    <li class="page-item{% if not pagination.has_prev %} disabled{% endif %}">
      <a class="page-link" href="{{ url_for('admin_posts', page=pagination.prev_num, q=q) }}">&laquo;</a>
    </li>
    {% for p in range(1, pagination.pages + 1) %}
    <li class="page-item{% if p == pagination.page %} active{% endif %}"><a class="page-link" href="{{ url_for('admin_posts', page=p, q=q) }}">{{ p }}</a></li>
    {% endfor %}
    <li class="page-item{% if not pagination.has_next %} disabled{% endif %}">
      <a class="page-link" href="{{ url_for('admin_posts', page=pagination.next_num, q=q) }}">&raquo;</a>
    </li>
  </ul>
</nav>
{% endblock %}
